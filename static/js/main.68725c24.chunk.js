(this["webpackJsonpindex-of-knowledge"]=this["webpackJsonpindex-of-knowledge"]||[]).push([[0],{1162:function(e,t,a){},1165:function(e,t,a){},1166:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(85),l=a.n(o),c=a(1173),i=a(19),s=a(35),d=a(29),u=a(37),p=a(36),h=(a(491),a(82)),f="blockstack",b="ipfs",m=1,g=2,v=1,y=new h.AppConfig(["store_write","publish_data"]),k=b,E={hash:"bafyreicuan6hdr7jaz5e7pdevsjqjtviigil5achefs6lcwdaah5zc57le"},O=[{user:"rustielin.id.blockstack",app:"https://index-of-knowledge.firebaseapp.com/?loaduser=rustielin.id.blockstack"},{user:"rustielintest.id.blockstack",app:"https://index-of-knowledge-beta.firebaseapp.com/?loaduser=rustielintest.id.blockstack"}],C={nodes:[{data:{name:"math",node_type:1,id:"0ed8f58bf8b3ae5ba6b882961eff9068c84268522fdf1b9a7fdc90cae0e9a703"}},{data:{name:"computer science",node_type:1,id:"48cd5a52518c7054ade553b6e0eb991d315ecfe96164b44c13dc47269c954982"}},{data:{name:"economics",node_type:1,id:"a4be61c650fefcc75b406cbf120212a6ffe71c3a983f64e603e1b823e575abbb"}},{data:{name:"bitcoin",node_type:1,id:"04eaf9a2a65d37f254fab35f969da7b133cea2087e1be846ea2dc8ccbb0e2470"}},{data:{resource_type:1,data:{text:"Computer science is the study of processes that interact with data and that can be represented as data in the form of programs.",link:""},node_type:2,id:"8d3e61ce168c16ae5c10fc0eb2085e7063844736be62d37c1318b437e60a06b2",name:"res-8d3e61ce16"}},{data:{resource_type:1,data:{text:"Economics is the social science that studies the production, distribution, and consumption of goods and services.",link:""},node_type:2,id:"71686ead6a4dc2481870877da6a888fab7c488819572c391b71acabd047930fe",name:"res-71686ead6a"}},{data:{resource_type:1,data:{text:"Mathematics is the study of abstract objects and structures that are often, but not always, abstracted from the physical world. It includes the study of such abstractions as quantity, structure, space and shapes, and change.",link:""},node_type:2,id:"4fba4eba5e774c7a67c951001f27784d63116b4fc182b9977254bd1223e185a1",name:"res-4fba4eba5e"}},{data:{resource_type:1,data:{text:"Bitcoin is an innovative payment network and a new kind of money.",link:""},node_type:2,id:"e6f043e27913e1ceb469bfbcc6eca983a374918618c4912e65f4756f6e177855",name:"res-e6f043e279"}},{data:{resource_type:4,data:{text:"Bitcoin: A Peer-to-Peer Electronic Cash System",link:"https://bitcoin.org/bitcoin.pdf"},node_type:2,id:"5e71f1ce88b810081fc39b4aae938593e8ddf086d93b544ae83c51bcb2905319",name:"res-5e71f1ce88"}}],edges:[{data:{source:"48cd5a52518c7054ade553b6e0eb991d315ecfe96164b44c13dc47269c954982",target:"04eaf9a2a65d37f254fab35f969da7b133cea2087e1be846ea2dc8ccbb0e2470",id:"0f366f92-58ca-4f29-b942-da41ca8863c7"}},{data:{source:"0ed8f58bf8b3ae5ba6b882961eff9068c84268522fdf1b9a7fdc90cae0e9a703",target:"04eaf9a2a65d37f254fab35f969da7b133cea2087e1be846ea2dc8ccbb0e2470",id:"090d2ffb-9a72-4660-a7a7-247119ba47a0"}},{data:{source:"a4be61c650fefcc75b406cbf120212a6ffe71c3a983f64e603e1b823e575abbb",target:"04eaf9a2a65d37f254fab35f969da7b133cea2087e1be846ea2dc8ccbb0e2470",id:"27ef1ee0-344b-4961-9afd-3639e32c6736"}},{data:{source:"8d3e61ce168c16ae5c10fc0eb2085e7063844736be62d37c1318b437e60a06b2",target:"48cd5a52518c7054ade553b6e0eb991d315ecfe96164b44c13dc47269c954982",id:"3a33c7c3-714a-4da4-a1e4-dbcc1cd1c86b"}},{data:{source:"71686ead6a4dc2481870877da6a888fab7c488819572c391b71acabd047930fe",target:"a4be61c650fefcc75b406cbf120212a6ffe71c3a983f64e603e1b823e575abbb",id:"92369729-24e4-4f83-9aa0-a72667cf9191"}},{data:{source:"4fba4eba5e774c7a67c951001f27784d63116b4fc182b9977254bd1223e185a1",target:"0ed8f58bf8b3ae5ba6b882961eff9068c84268522fdf1b9a7fdc90cae0e9a703",id:"1f3f5e7e-bf90-43ba-ace5-0fbfe462872b"}},{data:{source:"e6f043e27913e1ceb469bfbcc6eca983a374918618c4912e65f4756f6e177855",target:"04eaf9a2a65d37f254fab35f969da7b133cea2087e1be846ea2dc8ccbb0e2470",id:"649c601a-dd57-42a9-ba1f-5053c37152e0"}},{data:{source:"5e71f1ce88b810081fc39b4aae938593e8ddf086d93b544ae83c51bcb2905319",target:"04eaf9a2a65d37f254fab35f969da7b133cea2087e1be846ea2dc8ccbb0e2470",id:"53e2e0a4-a766-4b9e-a88a-a87c7d293772"}}]},S=[{selector:"node[name]",style:{"background-color":"#f8be35",label:"data(name)"}},{selector:"edge",style:{width:4,"target-arrow-shape":"triangle","line-color":"#FFE6A9","target-arrow-color":"#FFE6A9","curve-style":"bezier"}},{selector:".selected",style:{"background-color":"#E8747C"}},{selector:".highlighted",style:{"background-color":"#75b5aa","line-color":"#75b5aa","target-arrow-color":"#75b5aa","transition-property":"background-color, line-color, target-arrow-color","transition-duration":"0.5s"}},{selector:".altHighlighted",style:{"background-color":"#E8747C","line-color":"#E8747C","target-arrow-color":"#E8747C","transition-property":"background-color, line-color, target-arrow-color","transition-duration":"0.5s"}},{selector:".eh-handle",style:{"background-color":"red",width:12,height:12,shape:"ellipse","overlay-opacity":0,"border-width":12,"border-opacity":0}},{selector:".eh-hover",style:{"background-color":"red"}},{selector:".eh-source",style:{"border-width":2,"border-color":"red"}},{selector:".eh-target",style:{"border-width":2,"border-color":"red"}},{selector:".eh-preview, .eh-ghost-edge",style:{"background-color":"red","line-color":"red","target-arrow-color":"red","source-arrow-color":"red"}},{selector:".eh-ghost-edge.eh-preview-active",style:{opacity:0}}],N=(a(761),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).userSession=new h.UserSession({appConfig:y}),e}return Object(d.a)(a,[{key:"signIn",value:function(e){e.preventDefault(),this.userSession.redirectToSignIn()}},{key:"render",value:function(){var e=this.props.guestModeHandler;return r.a.createElement("div",{className:"Landing"},r.a.createElement("div",{className:"form-signin"},r.a.createElement("h1",{className:"h1 mb-3 font-weight-normal"},"Index of Knowledge"),r.a.createElement("button",{type:"button",className:"btn btn-lg btn-primary btn-block",onClick:this.signIn.bind(this)},"Sign in with Blockstack"),r.a.createElement("button",{type:"button",className:"btn btn-lg btn-primary btn-block",onClick:e},"Continue as guest")))}}]),a}(n.Component));N.defaultProps={guestModeHandler:function(){return alert("ERROR: guestModeHandler() invalid")}};var w=N,j=a(17),R=a(482),M=a(1171),T=a(483),G=a(146),D=a.n(G),x=a(470),L=a.n(x),F=a(471),I=a.n(F),H=a(472),_=a.n(H),P=a(1170),B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new URL(window.location.origin);a.pathname=e;var n=a.searchParams;Object.keys(t).forEach((function(e){n.set(e,t[e])})),window.location.href=a},U=function(){B(f,{guest:!0})},A=function(){B(k,E)},J=(a(951),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.storage,n=e.options,o=e.changeLoadUser,l=e.signOut;return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-blue fixed-top"},r.a.createElement(P.a,{className:"navbar-brand",onClick:function(){return a.onHomeClick(t,n,o)},to:"/"},"Index of Knowledge"),r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},a.greetingBuilder(t,n))),r.a.createElement("p",{className:"navbar-nav mr-auto"}),a.selectStorageBuilder(t),a.signOutBuilder(t,n,l.bind(this)))}}],[{key:"onHomeClick",value:function(e,t,a){switch(e){case f:a(t.username);break;case b:A()}}},{key:"greetingBuilder",value:function(e,t){switch(e){case f:return"Viewing ".concat(t.loaduser,"'s IoK, logged in as ").concat(t.username);case b:return t.hash;default:return"Hello"}}},{key:"signOutBuilder",value:function(e,t,a){switch(e){case f:return r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:a},"Sign","guest"===t.username?" in":" out");case b:return"";default:return"Hello"}}},{key:"selectStorageBuilder",value:function(e){switch(e){case f:return r.a.createElement("button",{type:"button",className:"btn btn-info btn-lg btn-util",onClick:function(){return B(b)}},"Try IPFS!");case b:return r.a.createElement("button",{type:"button",className:"btn btn-info btn-lg btn-util",onClick:function(){return B(f)}},"Try Blockstack!");default:return"Hello"}}}]),a}(n.Component));J.defaultProps={storage:k,options:E,changeLoadUser:function(){return alert("ERROR: changeLoadUser() invalid")},signOut:function(){return alert("ERROR: signOut() invalid")}};var z=J,K=a(481),q=a(473),$=a(1172),V=a(2),W=a.n(V),Q=a(195),X=a(474),Y=a.n(X),Z={trace:"lightblue",info:"green",warn:"pink",error:"red"},ee=new(function(){function e(){Object(s.a)(this,e)}return Object(d.a)(e,[{key:"generateMessage",value:function(e,t,a){var n="".concat("iok",":").concat(e),r=Y()(n);r.color=Z[e],a?r(a,t):r(t)}},{key:"trace",value:function(e,t){return this.generateMessage("trace",e,t)}},{key:"info",value:function(e,t){return this.generateMessage("info",e,t)}},{key:"warn",value:function(e,t){return this.generateMessage("warn",e,t)}},{key:"error",value:function(e,t){return this.generateMessage("error",e,t)}}]),e}()),te="listen",ae=null,ne=!1,re=null,oe=null,le=!1,ce=function(e){var t=e.json(),a=t.elements.nodes,n=t.elements.edges;if(!a||!n)return{nodes:[],edges:[]};for(var r=0;r<a.length;r+=1)a[r]={data:a[r].data};for(var o=0;o<n.length;o+=1)n[o]={data:n[o].data};return{nodes:a,edges:n}},ie=function(e){var t={elements:ce(e)};return t.style=e.style,t},se=function(e){e.fit()},de=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return re&&re.stop(),(re=e.layout({name:t?"cola":"dagre",animate:!0,padding:50,animationDuration:300,nodeDimensionsIncludeLabels:!0})).run(),new Promise((function(){se(e)}))},ue=function(e){var t=e.nodes("[node_type > 1]");if(0!==t.length){var a="none";"none"===t[0].style("display")&&(a="element");for(var n=0;n<t.length;n+=1)t[n].style("display",a)}},pe=function(e){e.removeClass("highlighted"),e.removeClass("altHighlighted")},he=function(){var e=Object(Q.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.removeClass("selected"),t.unselect();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(Q.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.addClass("highlighted");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(Q.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.addClass("altHighlighted");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(e){return e!==oe},ge=function(e,t){!function(e){e.nodes().forEach(pe),e.edges().forEach(pe),e.nodes().forEach(he),e.edges().forEach(he)}(e),oe=t,le=!1;var a=function e(t,a){if(null===t)return null.collection();for(var n=a.add(t),r=t.incomers(),o=0,l=0;l<r.length;l+=1){var c=r[l];n.contains(c)||(o+=(n=n.add(e(c,n))).length)}return o<r.length-1&&(le=!0,alert("Oh no! We have a dependency cycle...")),n}(t,e.collection());le?a.filter(me).forEach(be):a.filter(me).forEach(fe),t.addClass("selected")},ve=(a(954),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={isOpen:!1,nodeType:0,topicName:"",resourceType:0},n.toggleModal=n.toggleModal.bind(Object(j.a)(n)),n.handleClose=n.handleClose.bind(Object(j.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(j.a)(n)),n}return Object(d.a)(a,[{key:"toggleModal",value:function(){var e=this.state.isOpen;this.setState({isOpen:!e})}},{key:"handleClose",value:function(){this.setState({isOpen:!1,nodeType:0,topicName:"",resourceType:0,resourceData:null}),this.toggleModal()}},{key:"handleSubmit",value:function(){var e=this.state,t=e.nodeType,a=e.topicName,n=e.resourceType,r=e.resourceData,o={};if(0!==t){if(1===t){if(0===a.length)return void alert("Missing topic name");o={name:a}}else{if(0===n)return void alert("Missing resource type");if(o={resource_type:n,data:r},n>1){if(!r.text||0===r.text.length)return void alert("Missing resource text");if(!(l=r.link,!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(l)))return void alert("Invalid URL")}}var l;o.node_type=t,(0,this.props.addNode)(o),this.toggleModal()}else alert("Missing node type")}},{key:"pickedNode",value:function(){return 0===this.state.nodeType?r.a.createElement("p",null,"Pick a node type please"):this.fillInNode()}},{key:"fillInNode",value:function(){var e=this;return 1===this.state.nodeType?r.a.createElement($.a.Group,null,r.a.createElement($.a.Label,null,"Topic Name"),r.a.createElement($.a.Control,{type:"text",placeholder:"Bitcoin",onChange:function(t){return e.setState({topicName:t.target.value})}})):r.a.createElement($.a.Group,null,r.a.createElement($.a.Label,null,"Resource data"),r.a.createElement($.a.Group,null,r.a.createElement($.a.Check,{type:"radio",name:"radioResourceType",label:"Description",onClick:function(){return e.setState({resourceType:1,resourceData:{}})}}),r.a.createElement($.a.Check,{type:"radio",name:"radioResourceType",label:"Article",onClick:function(){return e.setState({resourceType:2,resourceData:{}})}}),r.a.createElement($.a.Check,{type:"radio",name:"radioResourceType",label:"Video",onClick:function(){return e.setState({resourceType:3,resourceData:{}})}}),r.a.createElement($.a.Check,{type:"radio",name:"radioResourceType",label:"Paper",onClick:function(){return e.setState({resourceType:4,resourceData:{}})}})),this.topicOrResource())}},{key:"topicOrResource",value:function(){var e=this,t=this.state.resourceType;return 0===t||1===t?r.a.createElement("div",null,r.a.createElement($.a.Control,{type:"text",placeholder:"Bitcoin is a p2p cash system",onChange:function(t){e.setState({resourceData:{text:t.target.value,link:null}})}}),r.a.createElement($.a.Control.Feedback,{type:"invalid"},"Please provide valid resource data"),r.a.createElement($.a.Text,null,"Resource data can be a description or hyperlink")):r.a.createElement("div",null,r.a.createElement($.a.Control,{type:"text",placeholder:"Bitcoin whitepaper",onChange:function(t){var a=t.target.value;e.setState((function(e){return{resourceData:Object(i.a)(Object(i.a)({},e.resourceData),{},{text:a})}}))}}),r.a.createElement($.a.Control.Feedback,{type:"invalid"},"Please provide valid resource link name"),r.a.createElement($.a.Text,null,"Resource link name"),r.a.createElement($.a.Control,{type:"url",placeholder:"https://bitcoin.org/bitcoin.pdf",onChange:function(t){var a=t.target.value;e.setState((function(e){return{resourceData:Object(i.a)(Object(i.a)({},e.resourceData),{},{link:a})}}))}}),r.a.createElement($.a.Control.Feedback,{type:"invalid"},"Please provide valid resource link"),r.a.createElement($.a.Text,null,"Resource link URL"))}},{key:"render",value:function(){var e=this,t=this.state.isOpen;return r.a.createElement("div",null,r.a.createElement(T.a,{className:"btn btn-info btn-lg btn-mod",onClick:this.toggleModal},"Add node"),r.a.createElement(M.a,{className:"Modal",show:t,onHide:this.handleClose},r.a.createElement(M.a.Header,{closeButton:!0},r.a.createElement(M.a.Title,null,"Add Node")),r.a.createElement(M.a.Body,null,r.a.createElement($.a.Label,null,"Node type"),r.a.createElement($.a.Group,null,r.a.createElement($.a.Check,{type:"radio",name:"radioNodeType",label:"Topic",onClick:function(){return e.setState({nodeType:1})}}),r.a.createElement($.a.Check,{type:"radio",name:"radioNodeType",label:"Resource",onClick:function(){return e.setState({nodeType:2})}})),this.pickedNode()),r.a.createElement(M.a.Footer,null,r.a.createElement(T.a,{style:{backgroundColor:"#a9a8a8"},variant:"primary",type:"submit",onClick:this.handleSubmit},"Add node"))))}}]),a}(n.Component));ve.defaultProps={addNode:function(){return alert("ERROR: addNode() invalid")}};var ye=ve,ke=a(1174),Ee=a(479),Oe=(a(956),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(s.a)(this,a);var r=(n=t.call(this,e)).props.addNode;return n.state=Object(i.a)({isOpen:!1},n.setStateFromNode()),n.addNode=r,n.toggleModal=n.toggleModal.bind(Object(j.a)(n)),n.handleClose=n.handleClose.bind(Object(j.a)(n)),n.handleOpen=n.handleOpen.bind(Object(j.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(j.a)(n)),n.setResourceType=n.setResourceType.bind(Object(j.a)(n)),n}return Object(d.a)(a,[{key:"setStateFromNode",value:function(){var e=this.props.node;return{topicName:e?e.data("name"):"",resourceType:e?e.data("resource_type"):0,resourceData:e?e.data("data"):{}}}},{key:"setResourceType",value:function(e){this.setState({resourceType:e})}},{key:"toggleModal",value:function(){var e=this.state.isOpen;this.setState({isOpen:!e})}},{key:"handleOpen",value:function(){this.setState(Object(i.a)({isOpen:!0},this.setStateFromNode()))}},{key:"handleClose",value:function(){this.setState({isOpen:!1}),this.toggleModal()}},{key:"handleSubmit",value:function(){this.toggleModal();var e=this.props,t=e.node,a=e.addNode,n=e.setNode,r=e.updateEdges,o=e.removeNode,l=Object(i.a)({},t.data()),c=this.state,s=c.resourceType,d=c.resourceData,u=c.topicName;if(l.resource_type=s,l.data=d,u&&(l.name=u),JSON.stringify(l)!==JSON.stringify(t.data())){2===l.node_type&&delete l.name,delete l.id;var p=a(l);n(p),r(t,p),p.shift(t.position()),p.trigger("tap"),o(t)}}},{key:"topicOrResource",value:function(){var e=this,t=this.props.node,a=this.state,n=a.topicName,o=a.resourceType;return t.data("node_type")===m?r.a.createElement($.a.Group,null,r.a.createElement($.a.Label,null,"Topic Name"),r.a.createElement($.a.Control,{type:"text",placeholder:"Bitcoin",value:n,onChange:function(t){return e.setState({topicName:t.target.value})}})):r.a.createElement($.a.Group,null,r.a.createElement($.a.Label,null,"Resource data"),r.a.createElement(ke.a,{type:"radio",name:"idk",value:o,onChange:this.setResourceType},r.a.createElement(Ee.a,{value:1},"Description"),r.a.createElement(Ee.a,{value:2},"Article"),r.a.createElement(Ee.a,{value:3},"Video"),r.a.createElement(Ee.a,{value:4},"Paper")),this.descOrLink())}},{key:"descOrLink",value:function(){var e=this,t=this.state,a=t.resourceType,n=t.resourceData;return 0===a||a===v?r.a.createElement("div",null,r.a.createElement($.a.Control,{id:"abc",name:"abc",type:"text",placeholder:"Bitcoin is a p2p cash system",value:n.text,onChange:function(t){var a=t.target.value;e.setState((function(e){return{resourceData:Object(i.a)(Object(i.a)({},e.resourceData),{},{text:a})}}))}}),r.a.createElement($.a.Control.Feedback,{type:"invalid"},"Please provide valid resource data"),r.a.createElement($.a.Text,null,"Resource data can be a description or hyperlink")):r.a.createElement("div",null,r.a.createElement($.a.Control,{type:"text",placeholder:"Bitcoin whitepaper",value:n?n.text:null,onChange:function(t){var a=t.target.value;e.setState((function(e){return{resourceData:Object(i.a)(Object(i.a)({},e.resourceData),{},{text:a})}}))}}),r.a.createElement($.a.Control.Feedback,{type:"invalid"},"Please provide valid resource link name"),r.a.createElement($.a.Text,null,"Resource link name"),r.a.createElement($.a.Control,{type:"url",placeholder:"https://bitcoin.org/bitcoin.pdf",value:n?n.link:null,onChange:function(t){var a=t.target.value;e.setState((function(e){return{resourceData:Object(i.a)(Object(i.a)({},e.resourceData),{},{link:a})}}))}}),r.a.createElement($.a.Control.Feedback,{type:"invalid"},"Please provide valid resource link"),r.a.createElement($.a.Text,null,"Resource link URL"))}},{key:"render",value:function(){var e=this.props.node,t=this.state.isOpen;return e?r.a.createElement("span",null,r.a.createElement(T.a,{className:"btn btn-info btn-lg btn-mod",onClick:this.toggleModal},"Edit node"),r.a.createElement(M.a,{className:"Modal",show:t,onHide:this.handleClose,onShow:this.handleOpen},r.a.createElement(M.a.Header,{closeButton:!0},r.a.createElement(M.a.Title,null,"Edit Node")),r.a.createElement(M.a.Body,null,r.a.createElement("p",null,e.data("name")),this.topicOrResource()),r.a.createElement(M.a.Footer,null,r.a.createElement(T.a,{style:{backgroundColor:"#a9a8a8"},variant:"primary",type:"submit",onClick:this.handleSubmit},"Edit node")))):r.a.createElement("span",null)}}]),a}(n.Component));Oe.defaultProps={addNode:function(){return alert("ERROR: addNode() invalid")},node:null,setNode:function(){return alert("ERROR: setNode() invalid")},updateEdges:function(){return alert("ERROR: updateEdgges() invalid")},removeNode:function(){return alert("ERROR: removeNode() invalid")}};var Ce=Oe,Se=(a(957),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={isOpen:!1},n.toggleModal=n.toggleModal.bind(Object(j.a)(n)),n}return Object(d.a)(a,null,[{key:"makeIokComponent",value:function(e,t){return r.a.createElement("a",{href:t},e)}},{key:"replaceUrlParam",value:function(e,t,a){var n=a;null==a&&(n="");var r=new RegExp("\\b(".concat(t,"=).*?(&|#|$)"));if(e.search(r)>=0)return e.replace(r,"$1".concat(n,"$2"));var o=e.replace(/[?#]$/,"");return"".concat(o+(o.indexOf("?")>0?"&":"?")+t,"=").concat(n)}}]),Object(d.a)(a,[{key:"toggleModal",value:function(){var e=this.state.isOpen;this.setState({isOpen:!e})}},{key:"render",value:function(){var e=this.state.isOpen;return r.a.createElement("div",null,r.a.createElement(T.a,{className:"btn btn-info btn-lg btn-mod",onClick:this.toggleModal},"List IoKs"),r.a.createElement(M.a,{className:"Modal",show:e,onHide:this.toggleModal},r.a.createElement(M.a.Header,{closeButton:!0},r.a.createElement(M.a.Title,null,"IoK Public Listing")),r.a.createElement(M.a.Body,null,r.a.createElement("ul",null,O.map((function(e){return r.a.createElement("li",{key:e.user},a.makeIokComponent(e.user,e.app))}))))))}}]),a}(n.Component)),Ne=(a(958),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(s.a)(this,a);var r=(n=t.call(this,e)).props,o=r.onSaveClick,l=r.onDeleteClick,c=r.loadGraphHandler;return n.onSaveClick=o,n.onDeleteClick=l,n.loadGraphHandler=c,n.toggleSaveModal=n.toggleSaveModal.bind(Object(j.a)(n)),n.toggleDeleteModal=n.toggleDeleteModal.bind(Object(j.a)(n)),n.onMetaClick=n.onMetaClick.bind(Object(j.a)(n)),n.onRegroupClick=n.onRegroupClick.bind(Object(j.a)(n)),n.onAddClick=n.onAddClick.bind(Object(j.a)(n)),n.addNodeToCy=n.addNodeToCy.bind(Object(j.a)(n)),n.downloadGraph=n.downloadGraph.bind(Object(j.a)(n)),n.onFileUploadHandler=n.onFileUploadHandler.bind(Object(j.a)(n)),n.removeNodeFromCy=n.removeNodeFromCy.bind(Object(j.a)(n)),n.updateEdgesFromCy=n.updateEdgesFromCy.bind(Object(j.a)(n)),n.state={drawEnabled:!1,showDeleteModal:!1,showSaveModal:!1},n}return Object(d.a)(a,[{key:"onMetaClick",value:function(){var e=this.state.cy;ue(e)}},{key:"onRegroupClick",value:function(){var e=this.state.cy;de(e)}},{key:"onAddClick",value:function(){var e=String(Math.ceil(1e6*Math.random())),t={node_type:1,name:"rand-".concat(e)};this.addNodeToCy(t)}},{key:"onFileUploadHandler",value:function(e){var t=this,a=new FileReader;a.onload=function(e){ee.info(e.target.result);try{var a=JSON.parse(e.target.result);t.loadGraphHandler(a)}catch(n){ee.error(n),alert("Invalid JSON file")}},a.readAsText(e.target.files[0])}},{key:"downloadGraph",value:function(){var e=this.state.cy,t=ce(e),a="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(t))),n=document.createElement("a");n.setAttribute("href",a),n.setAttribute("download","graph.json"),document.body.appendChild(n),n.click(),n.remove()}},{key:"addNodeToCy",value:function(e){var t=this.state.cy,a=q.sha256.create();a.update(JSON.stringify(e));var n=Object(i.a)(Object(i.a)({},e),{},{id:a.hex()});return"name"in e||(n=Object(i.a)(Object(i.a)({},n),{},{name:"res-".concat(n.id.substring(0,10))})),ee.info("DATA",n),function(e,t){try{return e.add({group:"nodes",data:t})}catch(a){return console.error(a),alert("Failed to add node. Check for ID collisions"),null}}(t,n)}},{key:"toggleDeleteModal",value:function(){var e=this.state.showDeleteModal;this.setState({showDeleteModal:!e})}},{key:"toggleSaveModal",value:function(){var e=this.state.showSaveModal;this.setState({showSaveModal:!e})}},{key:"removeNodeFromCy",value:function(e){this.state.cy.remove(e)}},{key:"updateEdgesFromCy",value:function(e,t){var a=this.state.cy;e.incomers((function(e){return e.isNode()})).map((function(e){return a.add({group:"edges",data:{source:e.id(),target:t.id()}})})),e.outgoers((function(e){return e.isNode()})).map((function(e){return a.add({group:"edges",data:{source:t.id(),target:e.id()}})})),a.remove(e.connectedEdges())}},{key:"render",value:function(){var e=this,t=this.props,n=t.currNode,o=t.graphLoaded,l=t.guestMode,c=t.setCurrNode,i=this.state,s=i.showDeleteModal,d=i.showSaveModal,u=i.drawEnabled,p=n,h=p&&Object.keys(p).length>0?p.data():{name:"Overview",data:"Index of Knowledge (IoK) is a curated collection of resources for blockchain, grouped by topic and topologically ordered by pedagogical dependency.",resource_type:1,node_type:2},f="";h.node_type===g&&(f="NOTE: Resource node. Displaying own contents");var b=[h];h.node_type===m&&(b=p.incomers((function(e){return e.isNode()})).map((function(e){return e.data()})));var v,y=[],k=[],E=[],O=Object(K.a)(b);try{for(O.s();!(v=O.n()).done;){var C=v.value;C.node_type===m?y.push(r.a.createElement("li",{key:C.name},C.name)):C.node_type===g&&(1===C.resource_type?k.push(r.a.createElement("li",{key:C.data},C.data.text)):E.push(r.a.createElement("li",{key:C.data},r.a.createElement("a",{href:C.data.link},C.data.text))))}}catch(S){O.e(S)}finally{O.f()}return p||E.push(r.a.createElement("li",{key:"dummy"},r.a.createElement("a",{href:"."},"Resource links appear here!"))),r.a.createElement("div",null,r.a.createElement(M.a,{className:"Modal",show:s,onHide:this.toggleDeleteModal},r.a.createElement(M.a.Header,null,r.a.createElement(M.a.Title,null,"Delete your IoK?")),r.a.createElement(M.a.Body,null,"This will delete all your IoK data from your Blockstack data locker."),r.a.createElement(M.a.Footer,null,r.a.createElement(T.a,{className:"btn btn-info btn-lg btn-delete",onClick:function(){e.onDeleteClick(),e.toggleDeleteModal()}},"Delete"))),r.a.createElement(M.a,{className:"Modal",show:d,onHide:this.toggleSaveModal},r.a.createElement(M.a.Header,null,r.a.createElement(M.a.Title,null,"Save your IoK?")),r.a.createElement(M.a.Body,null,"This will save your IoK data to your Blockstack data locker, potentially overwriting previous versions."),r.a.createElement(M.a.Footer,null,r.a.createElement(T.a,{className:"btn btn-info btn-lg btn-save",onClick:function(){e.onSaveClick(),e.toggleSaveModal()}},"Save"))),r.a.createElement("div",{id:"cytext",className:"iok-text"},r.a.createElement("div",null,r.a.createElement("h2",{className:"breaking",id:"nodetitle"},h.name),r.a.createElement("p",{className:"breaking",id:"nodeid"},h.id),r.a.createElement("p",{id:"nodesubtitle"},f),r.a.createElement("hr",{className:"hr-sep"}),0!==k.length&&r.a.createElement("div",null,r.a.createElement("h5",null,"Description(s)"),r.a.createElement("ul",{id:"nodedescs"},k)),0!==E.length&&r.a.createElement("div",null,r.a.createElement("h5",null,"Links"),r.a.createElement("ul",{id:"nodelinks"},E)),0!==y.length&&r.a.createElement("div",null,r.a.createElement("h5",null,"Dependencies"),r.a.createElement("ul",{id:"nodedeps"},y)),r.a.createElement("hr",{className:"hr-sep"}),r.a.createElement("div",null,r.a.createElement("div",{className:"edit-div"},r.a.createElement("h5",null,"Edit"),r.a.createElement(Ce,{node:p,addNode:this.addNodeToCy,removeNode:this.removeNodeFromCy,setNode:c,updateEdges:this.updateEdgesFromCy}),r.a.createElement(ye,{addNode:this.addNodeToCy}),r.a.createElement("button",{type:"button",className:"btn btn-info btn-lg btn-util",onClick:function(){a.onDrawClick(),e.setState({drawEnabled:!u})}},"Turn ".concat(u?"OFF":"ON"," edge drawing")),!o||l?r.a.createElement("div",null):r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn-info btn-lg btn-save",onClick:this.toggleSaveModal},"Save"),r.a.createElement("button",{type:"button",className:"btn btn-info btn-lg btn-delete",onClick:this.toggleDeleteModal},"Delete"))),r.a.createElement("div",{className:"misc-div"},r.a.createElement("h5",null,"Misc"),r.a.createElement(Se,null),o?r.a.createElement("button",{type:"button",id:"downloadButton",className:"btn btn-info btn-lg btn-util",onClick:this.downloadGraph},"Download"):r.a.createElement("div",null),r.a.createElement("input",{className:"btn btn-info btn-lg btn-upload",type:"file",name:"file",onChange:this.onFileUploadHandler}))))))}}],[{key:"getDerivedStateFromProps",value:function(e){return{cy:e.cy}}},{key:"onDrawClick",value:function(){ne?(ae.disableDrawMode(),ae.disable(),ne=!1):(ae.enable(),ae.enableDrawMode(),ne=!0)}}]),a}(n.Component));Ne.defaultProps={onSaveClick:function(){return alert("ERROR: onSaveClick() invalid")},onDeleteClick:function(){return alert("ERROR: onDeleteClick() invalid")},loadGraphHandler:function(){return alert("ERROR: loadGraphHandler() invalid")},cy:{},currNode:null,graphLoaded:!1,guestMode:!1,setCurrNode:function(){return alert("ERROR: setCurrNode() invalid")}};var we=Ne,je=a(280),Re="storage.localstorage",Me="localgraph",Te=function(e,t,a){try{var n=JSON.stringify(e);localStorage.setItem(Me,n),localStorage.setItem("storagetype",t);var r=JSON.stringify(a);localStorage.setItem("storageoptions",r),ee.info(Re,"localstorage save successful")}catch(o){}};a(1162);D.a.use(L.a),D.a.use(I.a),D.a.use(_.a);var Ge=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(s.a)(this,a);var r=(n=t.call(this,e)).props,o=r.storage,l=r.options;return ee.info("storage/options"),ee.info(o),ee.info(l),n.userSession=new h.UserSession({appConfig:y}),n.state={storage:o,options:l,graphLoaded:!1,unableToLoadGraph:!1,selectedNode:null,timerID:0},n.loadGraph=n.loadGraph.bind(Object(j.a)(n)),n.saveGraph=n.saveGraph.bind(Object(j.a)(n)),n.deleteGraph=n.deleteGraph.bind(Object(j.a)(n)),n.signOut=n.signOut.bind(Object(j.a)(n)),n.changeLoadUser=n.changeLoadUser.bind(Object(j.a)(n)),n.loadDefaultGraph=n.loadDefaultGraph.bind(Object(j.a)(n)),n.loadEmptyGraph=n.loadEmptyGraph.bind(Object(j.a)(n)),n.loadGraphFromFile=n.loadGraphFromFile.bind(Object(j.a)(n)),n.onSuccessLoadGraph=n.onSuccessLoadGraph.bind(Object(j.a)(n)),n.onErrorLoadGraph=n.onErrorLoadGraph.bind(Object(j.a)(n)),n.periodicallySaveCache=n.periodicallySaveCache.bind(Object(j.a)(n)),n}return Object(d.a)(a,null,[{key:"overrideGutterStyle",value:function(){return{width:"8px",height:"100vh","background-color":"#18191c"}}}]),Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=D()({container:document.getElementById("cy"),layout:{name:"dagre",animate:!0},style:S});this.setState({cy:t},(function(){!function(e,t){e.on("tap","node",(function(a){var n=a.target;fe(n),t(n),ge(e,n)}))}(t,(function(t){e.setState({selectedNode:t})})),function(e){(ae=e.edgehandles({preview:!0,noEdgeEventsInDraw:!0,snap:!0,handleNodes:"node"})).disableDrawMode(),ae.disable(),e.on("ehcomplete",(function(t,a,n,r){ee.info(te,"Added edge..."),ee.info(te,"source:",a),ee.info(te,"target:",n),ee.info(te,"eles:",e.elements().length)}))}(t),e.loadGraph();var a=e.state.timerID;clearInterval(a);var n=setInterval(e.periodicallySaveCache,1e3);e.setState({timerID:n})}))}},{key:"onSuccessLoadGraph",value:function(e){var t=this.state,a=t.cy,n=t.storage,r=t.options;ee.info(e),ee.info(a),a.json(e),ee.info("Cy currently size",a.elements().length),de(a,!1),de(a),this.setState({graphLoaded:!0}),Te(e,n,r)}},{key:"onErrorLoadGraph",value:function(e){ee.error("Failed to load graph",e);var t=this.state.options;this.setState({unableToLoadGraph:!0,options:Object(i.a)(Object(i.a)({},t),{},{loaduser:"default"})})}},{key:"periodicallySaveCache",value:function(){var e=this.state,t=e.cy,a=e.storage,n=e.options,r=ie(t);Te(r,a,n)}},{key:"changeLoadUser",value:function(e){var t=this.state.options;this.setState({options:Object(i.a)(Object(i.a)({},t),{},{loaduser:e})})}},{key:"loadGraph",value:function(){var e,t,a,n=this.state,r=n.storage,o=n.options,l=function(e){ee.info(Re,"Loading from localstorage");var t=localStorage.getItem(Me),a=localStorage.getItem("storagetype"),n=localStorage.getItem("storageoptions");try{if(t&&a&&n){var r=JSON.parse(t);if(null!==r.elements&&r.elements.nodes.length>0&&r.elements.edges.length>0){var o=JSON.parse(n);return ee.info(Re,"Got from graph from localstorage"),ee.info(Re,r),ee.info(Re,a),ee.info(Re,o),{graph:r,storage:a,options:o}}e("cached graph is empty, skipping")}e("cache is empty")}catch(l){e(l)}return{}}((function(e){ee.error(e,"cache invalid")}));if(Object.keys(l).length>0){if(l.storage===r&&JSON.stringify(l.options)===JSON.stringify(o))return ee.info("Load request cache"),void this.onSuccessLoadGraph(l.graph);if(r===k&&JSON.stringify(o)===JSON.stringify(E))return ee.info("Load DEFL request cache"),void this.onSuccessLoadGraph(l.graph)}switch(r){case b:e=o.hash,t=this.onSuccessLoadGraph,a=this.onErrorLoadGraph,ee.info("storage.ipfs","Loading from IPFS",e),Object(je.getFullGraph)(e).then((function(e){return t(e)})).catch((function(e){return a(e)}));break;case f:!function(e,t,a,n){ee.info("GOT FUNCTIONS",a,n),ee.info("storage.blockstack","Loading",t,"'s data");var r={decrypt:!1,username:t};e.getFile("graph.json",r).then((function(e){if(e&&e.length>0){var t=JSON.parse(e);a(t)}else n()})).catch((function(e){n(e)}))}(this.userSession,o.loaduser,this.onSuccessLoadGraph,this.onErrorLoadGraph)}}},{key:"loadGraphFromFile",value:function(e){var t=this.state,a=t.cy,n=t.options;try{a.json({elements:e,style:S}),de(a,!1),de(a),this.setState({graphLoaded:!0})}catch(r){alert("Invalid graph format"),this.setState({unableToLoadGraph:!0,options:Object(i.a)(Object(i.a)({},n),{},{loaduser:"default"})})}}},{key:"saveGraph",value:function(){var e=this,t=this.state,a=t.cy,n=t.storage,r=t.options,o=ie(a);switch(Te(o,n,r),n){case b:!function(e,t){Object(je.putGraph)(e).then((function(e){ee.info("storage.ipfs",e),t(e)})).catch((function(e){return ee.error(e)}))}(o,(function(t){e.setState({options:{hash:t}}),alert(t)}));break;case f:!function(e,t){ee.info("storage.blockstack","SAVING...",e),t.putFile("graph.json",JSON.stringify(e),{encrypt:!1}).finally((function(){ee.info("Saved")}))}(o,this.userSession)}}},{key:"deleteGraph",value:function(){var e=this,t=this.state,a=t.cy,n=t.storage,r=t.options;switch(n){case b:ee.error("IPFS delete not implemented");break;case f:this.userSession.deleteFile("graph.json").finally((function(){a.json({elements:[],style:S}),e.setState({graphLoaded:!1,unableToLoadGraph:!0,options:Object(i.a)(Object(i.a)({},r),{},{loaduser:"default"})}),e.loadGraph()}))}localStorage.removeItem(Me),localStorage.removeItem("storagetype"),localStorage.removeItem("storageoptions")}},{key:"signOut",value:function(e){this.state.storage===f&&(e.preventDefault(),this.userSession.signUserOut(),window.location="/?storage=".concat(f))}},{key:"loadEmptyGraph",value:function(){var e=this.state.cy;this.setState({graphLoaded:!0,unableToLoadGraph:!1}),de(e)}},{key:"loadDefaultGraph",value:function(){var e=this.state.cy;e.json({elements:C,style:S}),this.setState({graphLoaded:!0,unableToLoadGraph:!1}),de(e,!1),de(e)}},{key:"NavOrNot",value:function(){var e=this.state,t=e.storage,a=e.options;return t===b?null:r.a.createElement(z,{username:a.username,loadName:a.loaduser,changeLoadUser:this.changeLoadUser,signOut:this.signOut})}},{key:"render",value:function(){var e=this,t=this.state,n=t.cy,o=t.storage,l=t.options,c=t.graphLoaded,i=t.unableToLoadGraph,s=t.selectedNode,d=l.guest;return r.a.createElement("div",{className:"SignedIn"},r.a.createElement(M.a,{className:"Modal",show:!c&&!i},r.a.createElement(M.a.Header,null,r.a.createElement(M.a.Title,null,"Loading graph from ".concat(o))),r.a.createElement(M.a.Footer,null)),r.a.createElement(M.a,{className:"Modal",show:i,onHide:this.loadEmptyGraph},r.a.createElement(M.a.Header,null,r.a.createElement(M.a.Title,null,"Unable to fetch graph")),r.a.createElement(M.a.Footer,null,r.a.createElement(T.a,{style:{backgroundColor:"#a9a8a8"},variant:"secondary",type:"submit",onClick:this.loadEmptyGraph},"Load empty"),r.a.createElement(T.a,{style:{backgroundColor:"#a9a8a8"},variant:"primary",type:"submit",onClick:this.loadDefaultGraph},"Load default"))),r.a.createElement(z,{storage:o,options:l,changeLoadUser:this.changeLoadUser,signOut:this.signOut}),r.a.createElement(R.a,{className:"split-parent",sizes:[60,40],gutterStyle:a.overrideGutterStyle,gutterAlign:"center",direction:"horizontal",cursor:"col-resize"},r.a.createElement("div",{className:"split split-horizontal"},r.a.createElement("div",{className:"split content",id:"cy"},r.a.createElement("p",{className:"hidden-msg"},"p.s. refresh if the graph does not load"),r.a.createElement("div",{className:"cy-overlay"},r.a.createElement(T.a,{className:"btn btn-info btn-lg btn-util",onClick:function(){return ue(n)}},"Toggle meta-graph"),r.a.createElement(T.a,{className:"btn btn-info btn-lg btn-util",onClick:function(){return de(n,!1)}},"Regroup dagre"),r.a.createElement(T.a,{className:"btn btn-info btn-lg btn-util",onClick:function(){return de(n)}},"Regroup cola")))),r.a.createElement("div",{className:"split split-horizontal"},r.a.createElement(we,{currNode:s,className:"split content",cy:n,onSaveClick:this.saveGraph,onDeleteClick:this.deleteGraph,loadGraphHandler:this.loadGraphFromFile,guestMode:d,graphLoaded:c,setCurrNode:function(t){return e.setState({selectedNode:t})}}))))}}]),a}(n.Component);Ge.defaultProps={storage:k,options:E};var De=Ge,xe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(s.a)(this,a),e=t.call(this);var n=function(){var e=new URL(window.location.href).pathname.split("/")[1].split("&")[0],t=new URLSearchParams(window.location.search),a=k,n=JSON.parse(JSON.stringify(E));switch(e){case f:a=f,t.has("guest")&&"true"===t.get("guest")?(n.guest=!0,n.username="guest"):n.guest=!1,t.has("loaduser")&&(n.loaduser=t.get("loaduser"));break;case b:a=b,t.has("hash")?n.hash=t.get("hash"):A();break;default:A()}return{storage:a,options:n}}(),r=n.storage,o=n.options;return e.state={storage:r,options:o},e.userSession=new h.UserSession,ee.info(r,o),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.storage,n=t.options,r=this.userSession;a!==f||"guest"in n||n.guest||!r.isUserSignedIn()&&r.isSignInPending()&&r.handlePendingSignIn().then((function(t){if(!t.username)throw new Error("This app requires a username.");e.setState({options:Object(i.a)(Object(i.a)({},n),{},{username:t.username})}),B(f,{loaduser:t.username})}))}},{key:"render",value:function(){var e=this.state,t=e.storage,a=e.options;return ee.trace("Re-render App.jsx:",t,a),r.a.createElement("div",{className:"site-wrapper"},t===b||a.guest||this.userSession.isUserSignedIn()?r.a.createElement(De,{storage:t,options:a}):r.a.createElement(w,{guestModeHandler:U}))}}]),a}(n.Component);a(1163),a(1164),a(1165);l.a.render(r.a.createElement(c.a,null,r.a.createElement(xe,null)),document.getElementById("root"))},280:function(e,t,a){var n=a(71),r=a(2),o=a(5),l=new(a(959))({host:"ipfs.infura.io",port:"5001",protocol:"https",apiPath:"/api/v0"});function c(){return(c=o(r.mark((function e(t){var a,n,o,c,i,s,d;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("elements"in t&&"nodes"in t.elements&&"edges"in t.elements){e.next=3;break}throw Error("Invalid graph, expected elements: {nodes, edges}");case 3:return a={format:"dag-cbor",hashAlg:"sha2-256",pin:"true"},n=[],o=function(e,t){var n=l.dag.put(e,a);t.push(n)},t.elements.nodes.forEach((function(e){return o(e,n)})),e.next=9,Promise.all(n);case 9:return c=e.sent,i=t.elements.edges,s={elements:{nodes:c,edges:i}},e.next=14,l.dag.put(s,a);case 14:return d=e.sent,e.abrupt("return",d.toBaseEncodedString());case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e){return s.apply(this,arguments)}function s(){return(s=o(r.mark((function e(t){var a,n,o=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"",e.next=3,l.dag.get(t+a);case 3:return n=e.sent,e.abrupt("return",n.value);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=o(r.mark((function e(t){var a,o,c,s,d,u,p;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:if(o=e.sent,"elements"in o&&"nodes"in o.elements&&"edges"in o.elements){e.next=6;break}throw Error("Invalid CID for graph, expected elements: {nodes, edges}");case 6:return c=o.elements.nodes,s=[],d=function(e,t){var a=l.dag.get(e);t.push(a)},c.forEach((function(e){return d(e,s)})),e.next=12,Promise.all(s);case 12:return u=e.sent,p={elements:{nodes:[],edges:[]}},u.forEach((function(e){return p.elements.nodes.push(e.value)})),(a=p.elements.edges).push.apply(a,n(o.elements.edges)),e.abrupt("return",p);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports.putGraph=function(e){return c.apply(this,arguments)},e.exports.getGraph=i,e.exports.getFullGraph=function(e){return d.apply(this,arguments)}},486:function(e,t,a){e.exports=a(1166)},491:function(e,t,a){},505:function(e,t){},507:function(e,t){},518:function(e,t){},520:function(e,t){},531:function(e,t){},533:function(e,t){},639:function(e,t){},697:function(e,t){},761:function(e,t,a){},951:function(e,t,a){},954:function(e,t,a){},956:function(e,t,a){},957:function(e,t,a){},958:function(e,t,a){},988:function(e,t){}},[[486,1,2]]]);
//# sourceMappingURL=main.68725c24.chunk.js.map